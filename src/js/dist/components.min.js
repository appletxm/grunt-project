"use strict";function getRegExpRange(a,b){var c;return a&&"number"===(typeof a).toLowerCase()&&(c=b&&"number"===(typeof b).toLowerCase()?"{"+a+","+b+"}":b===!1?"{"+a+"}":"{"+a+",}"),c}function getQueryString(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)"),c=window.location.search.substr(1).match(b);return null!=c?unescape(c[2]):null}var Ajax=function(){this.xmlHttp=null,this.parameters={},this.msgs={paramError:"参数有误"},this.GetXmlHttpObject=function(){var a=null;try{a=new XMLHttpRequest}catch(b){try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(b){a=new ActiveXObject("Microsoft.XMLHTTP")}}return a},this.xmlHttp=this.GetXmlHttpObject(),this.send=function(a){var b=a;return this.parameters=a,b.timeout||(b.timeout=2e4),b.url&&""!==b.url?(this.starAnimate(),void this.doAjax(a)):(b.onError&&b.onError({msg:this.msgs.paramError}),!1)},this.doAjax=function(a){var b,c;if(this.parameters=a,a.cache||(b=a.url.indexOf("?")>=0?a.url+"&timer="+Math.random():a.url+"?timer="+Math.random()),"GET"===a.type?(c=a.sendParameters?this.getGetParameters(a.sendParameters):null,b=b.indexOf("?")>=0?b+"&"+c:b+"?"+c,c=null):c=a.sendParameters?this.getPostParameters(a.sendParameters):null,a.isJsonp&&a.needNewScript)this.doJsonpNewScript(a);else{if(this.xmlHttp.onreadystatechange=this.stateChanged.bind(this),this.xmlHttp.open(a.type,b,a.asyn||!1),"POST"===a.type)try{this.xmlHttp.setRequestHeader("Content-Type","text/json")}catch(d){alert(d)}this.xmlHttp.send(this.parameters.needPostJson?JSON.stringify(this.parameters.sendParameters):c)}},this.getGetParameters=function(a){var b="";if("object"===(typeof a).toLowerCase())for(var c in a)b+=c+"="+a[c]+"&";return b=b.substring(0,b.length-1)},this.getPostParameters=function(a){var b="";if("object"===(typeof a).toLowerCase())for(var c in a)b+=c+"="+JSON.stringify(a[c])+"&";return b=b.substring(0,b.length-1)},this.stateChanged=function(){this.xmlHttp;4===this.xmlHttp.readyState&&(200==this.xmlHttp.status?this.onSuccess(this.xmlHttp.responseText):this.onError(this.xmlHttp.responseText))},this.onSuccess=function(a){var b,c=this.parameters;this.parameters.isJsonp?this.doJsonpNewFunction(a):(b=JSON.parse(a),("0"===b.code||0===b.code)&&this.endAnimate(),c.onSuccess&&c.onSuccess(b))},this.onError=function(a){var b=this.parameters;b.onError&&b.onError({msg:this.xmlHttp.responseText})},this.doJsonpNewScript=function(a){var b,c,d;d=document.querySelectorAll("body")[0],c=a.url,c=c.indexOf("?")>=0?"&callback="+a.callback:"?callback="+a.callback,b=document.querySelector("dynamicScript"),b&&b.length>0&&d.removeChild(b),b=document.createElement("script"),b.setAttribute("src",c),b.setAttribute("id","dynamicScript"),d.appendChild(b),this.endAnimate()},this.doJsonpNewFunction=function(a){var b=new Function(a);b()},this.starAnimate=function(){var a=this.parameters.mssage;a&&a.show({msg:'<span class="fa fa-spinner fa-pulse fa-2x fa-fw"></span>',type:"loading",autoClose:!1})},this.endAnimate=function(){var a=this.parameters.mssage;a&&a.hide()}},AnimateCheck=function(){this.param={bindObj:null,callBack:null},this.init=function(a){this.param=a;for(var b in a)this.param[b]=a[b];this.attachEvent()},this.handleClick=function(){this.toggleCheck()},this.toggleCheck=function(a,b,c){var d=this.param.bindObj,e=d.querySelectorAll("input")[0];d.querySelectorAll("b")[0];a===!0||a===!1?d.className="animate-check"+(a===!0?"":" close"):d.className.indexOf("close")>=0?(d.className="animate-check",a=!0):(d.className="animate-check close",a=!1),e.value=b?b:a===!0?1:0,this.param.callBack&&c!==!0&&this.param.callBack(a,e.value)},this.attachEvent=function(){var a=this.param.bindObj;a.addEventListener("click",function(){this.handleClick()}.bind(this))}},Compatible=function(){},FormatTime=function(){this.getString=function(a){var b,c,d,e,f,g="",h={},i=new Date;return i.setTime(parseInt(a,10)),b=i.getMonth()+1,b=10>b?"0"+b:b,c=i.getDate(),c=10>c?"0"+c:c,d=i.getHours(),d=10>d?"0"+d:d,e=i.getMinutes(),e=10>e?"0"+e:e,f=i.getSeconds(),f=10>f?"0"+f:f,g+=i.getFullYear()+"-"+b+"-"+c+" "+d+":"+e+":"+f,h.year=i.getFullYear(),h.month=i.getMonth(),h.day=i.getDate(),h.hour=i.getHours(),h.minute=i.getMinutes(),h.second=i.getSeconds(),{dateStr:g,time:h}}},FullScreenView=function(){this.fullScreenView=null,this.container=null,this.body=null,this.classNames={normal:"full-screen-view",active:"full-screen-view-show",loading:"full-screen-view-loading"},this.init=function(){this.createFullScreenView(),this.attacheEvent()},this.createFullScreenView=function(){var a=document.createElement("div"),b="";b+='<div class="mask"></div>',b+='<div class="container"></div>',a.className="full-screen-view",a.innerHTML=b,document.querySelectorAll("body")[0].appendChild(a),this.fullScreenView=a,setTimeout(function(){this.container=this.fullScreenView.querySelectorAll(".container")[0]}.bind(this),0)},this.handleMaskClick=function(a){this.hide()},this.show=function(a){var b="";a.src&&""!==a.src&&"null"!==a.src&&"undefined"!==a.src&&(1===a.type?b='<img src="'+a.src+'" />':2===a.type&&(b='<video controls="controls" preload="preload" width="240" src="'+a.src+'" type="video/mp4"></video>'),this.container.innerHTML=b,1===a.type?this.body=this.container.querySelectorAll("img")[0]:2===a.type&&(this.body=this.container.querySelectorAll("video")[0]),this.body.onload=function(){this.resizePanel(),a.event?this.setImagePanelToTrigger(a.event):this.body.style.display="block"}.bind(this))},this.setImagePanelToTrigger=function(a){var b,c,d,e,f;b=a.clientY-a.offsetY,c=a.clientX-a.offsetX,d=a.target.clientWidth,e=a.target.clientHeight,f="width:"+d+"px;",f+="height:"+e+"px;",f+="top:"+b+"px;",f+="left:"+c+"px;",f+="display:block;",this.fullScreenView.setAttribute("style",f),setTimeout(function(){this.fullScreenView.className=this.classNames.normal+" "+this.classNames.active}.bind(this),0)},this.imgLoading=function(a){var b,c,d,e,f;b=a.clientY-a.offsetY,c=a.clientX-a.offsetX,d=a.target.clientWidth,e=a.target.clientHeight,f="width:"+d+"px;",f+="height:"+e+"px;",f+="top:"+b+"px;",f+="left:"+c+"px;",this.fullScreenView.className=this.classNames.normal+" "+this.classNames.loading,this.fullScreenView.setAttribute("style",f)},this.hide=function(){this.fullScreenView.className=this.classNames.normal,setTimeout(function(){this.container.innerHTML="",this.fullScreenView.removeAttribute("style"),this.body.onload=null,this.body=null}.bind(this),310)},this.resizePanel=function(){var a,b,c=document.documentElement.clientWidth,d=document.documentElement.clientHeight,e=1;if(!this.body)return!1;if(a=this.body.naturalWidth||this.body.clientWidth,b=this.body.naturalHeight||this.body.clientHeight,a>c){e=c/a;var f=e*b;f>d&&(e=d/b)}else b>d&&(e=d/b);b=e*b,a=e*a;var g=parseInt((c-a)/2,10),h=parseInt((d-b)/2,10);this.body.setAttribute("style","width:"+a+"px; height:"+b+"px; left:"+g+"px; top:"+h+"px;"),this.fullScreenView.querySelectorAll(".mask")[0].setAttribute("style","top:0; bottom:0;")},this.attacheEvent=function(){var a=this.fullScreenView,b=(a.querySelectorAll(".mask")[0],a.querySelectorAll(".container")[0]);b.addEventListener("click",function(a){this.handleMaskClick(a)}.bind(this),!1),a.addEventListener("touchmove",function(a){a.stopPropagation(),a.preventDefault()}),window.addEventListener("resize",function(a){this.resizePanel()}.bind(this)),document.querySelectorAll("body")[0].addEventListener("onorientationchange",function(){this.resizePanel()}.bind(this))},this.init()},MessageBox=function(){this.showTime=2e3,this.animateTimer=0,this.animateTimeStep=450,this.timer=0,this.msgDom=null,this.msgCss={normal:"tipMsg",active:"tipMsgActived",alert:"alert",loading:"loading",body:"msg-body",bodyActive:"msg-body-actived",loadingActive:"loading-actived"},this.messageParams={},this.show=function(a){var b,c,d=[];if(this.messageParams=a,b=document.querySelectorAll("."+this.msgCss.normal),b.length>0){for(var e in b)/\d/.test(e)&&d.push(b[e]);this.msgDom=d[d.length-1],this.msgBody=document.querySelectorAll(".msg-body")[0]}else this.msgDom=document.createElement("div"),this.msgBody=document.createElement("div"),c=document.createElement("div"),c.className="mask",this.msgDom.appendChild(c),this.msgDom.appendChild(this.msgBody),document.querySelectorAll("body")[0].appendChild(this.msgDom);this.buildMessageHTML(a)},this.buildMessageHTML=function(a){var b,c;b="loading"===a.type?'<span class="fa fa-spinner fa-pulse"></span>':a.msg||"",this.msgBody.className=this.msgCss.body+" "+a.type,this.msgDom.className=this.msgCss.normal+" "+this.msgCss.active,setTimeout(function(){c=this.msgCss.body+" "+a.type+" "+("loading"===a.type?this.msgCss.loadingActive:this.msgCss.bodyActive),this.msgBody.className=c,this.msgBody.innerHTML=b,a.autoClose===!0&&(clearTimeout(this.animateTimer),clearTimeout(this.timer),this.timer=setTimeout(function(){this.hide()}.bind(this),this.showTime))}.bind(this),10)},this.hide=function(){this.msgBody&&(this.msgBody.className=this.msgCss.body+" "+(this.messageParams.type||""),this.msgBody.innerHTML=""),this.messageParams={},this.animateTimer=setTimeout(function(){this.msgDom&&(this.msgDom.className=this.msgCss.normal),this.msgBody&&(this.msgBody.className=this.msgCss.body)}.bind(this),this.animateTimeStep)}},PopWindow=function(){this.showPanelParameters={},this.popWindow=null,this.init=function(){this.createWindowPanel(),this.attacheEvent()},this.createWindowPanel=function(){var a=document.createElement("div"),b="";b+='<div class="mask"></div>',b+='<div class="container">',b+="<header>选择银行</header>",b+='<div class="body"></div>',b+="<footer></footer>",b+="</div>",document.querySelectorAll("body")[0].appendChild(a),a.className="pop-window",a.innerHTML=b,this.popWindow=a},this.show=function(a){var b,c,d,e,f=this.popWindow,g="";if(this.showPanelParameters=a,b=f.querySelectorAll(".mask")[0],c=f.querySelectorAll("header")[0],d=f.querySelectorAll("footer")[0],e=f.querySelectorAll(".body")[0],a.buttons&&a.buttons.length>0){for(var h=0;h<a.buttons.length;h++){var i=a.buttons[h].callback?'onclick="'+a.buttons[h].callback+'"':"";g+='<a class="'+(a.buttons[h].css||"save")+'"'+i+">"+(a.buttons[h].text||"")+"</a>"}d.innerHTML=g,d.style.display="block"}else d.style.display="none";a.title?(c.innerHTML=a.title||"",c.style.display="block"):c.style.display="none",a.needMask&&(b.style.display="block"),e.innerHTML=a.content||"",f.style.display="block",setTimeout(function(){this.resizeWindow(a,f,c,d,f.querySelectorAll(".container")[0],e)}.bind(this),0)},this.resizeWindow=function(a,b,c,d,e,f){var g,h=document.documentElement.clientWidth,i=document.documentElement.clientHeight,j=a.space&&a.space.top?a.space.top:20,k=a.space&&a.space.left?a.space.left:20,l=(a.title?41:0)+(a.buttons&&a.buttons.length>0?40:0),m=h-2*k,n=i-2*j,o=n-l,p=-(n/2),q=-(m/2);a.space.height&&a.space.height>0&&(o=a.space.height,n=o+l,p=-n/2),a.space.width&&a.space.width>0&&(m=a.space.width,q=-m/2),g="width:"+m+"px;"+("height:"+n+"px;")+("margin:"+p+"px "+q+"px;"),e.setAttribute("style",g),f.setAttribute("style","width:"+m+"px;height:"+o+"px;")},this.hide=function(){var a=null,b=this.popWindow;b&&(b.style.display="none",a=b.querySelectorAll(".mask"),a[0].style.display="none")},this.handleContentClick=function(a){var b=this.showPanelParameters;b.contentClickCallback&&"function"===(typeof b.contentClickCallback).toLowerCase()&&b.contentClickCallback(a),a.stopPropagation(),a.preventDefault()},this.handleResizePopEvent=function(){var a,b,c,d=this.popWindow;a=d.querySelectorAll("header")[0],b=d.querySelectorAll("footer")[0],c=d.querySelectorAll(".body")[0],this.resizeWindow(this.showPanelParameters,d,a,b,d.querySelectorAll(".container")[0],c)},this.attacheEvent=function(){var a=this.popWindow,b=a.querySelectorAll(".body")[0],c=navigator.userAgent.toLowerCase();b.addEventListener("click",function(a){this.handleContentClick(a)}.bind(this),!1),b.addEventListener("touchmove",function(a){a.stopPropagation()}),this.popWindow.addEventListener("touchmove",function(a){a.stopPropagation(),a.preventDefault()}),c.indexOf("android")>=0&&c.indexOf("qqbrowser")>=0&&window.addEventListener("resize",function(a){this.handleResizePopEvent(),a.stopPropagation(),a.preventDefault()}.bind(this))},this.init()},SearchFromCache=function(){this.params={},this.init=function(){},this.showSearchBox=function(a){var b,c,d,e=null;if(a)for(var f in a)this.params[f]=a[f];c=this.params.pageJSObjName,d=this.params.pageJSObj,b=this.getAddNewItemHtml(),!this.params.popWindow&&this.params.bindObj?this.params.bindObj.innerHTML=b:(c&&d&&d.searchFromCache&&(e=c+".searchFromCache"),this.showPopSearchBox(e,b))},this.showPopSearchBox=function(a,b){var c={buttons:[]};c.needMask=!0,c.title=this.params.title||"",c.space={height:150},c.content=b,c.buttons.push({text:"添 加",css:"save x2",callback:a+".doSaveNewItemName()"},{text:"取 消",css:"cancel x2",callback:a+".cancelNewHospitalCallback()"}),this.params.popWindow.show(c)},this.getAddNewItemHtml=function(){var a="",b=this.params,c=b.pageJSObjName,d=b.pageJSObj,e=null,f=null,g=b.inputLen||100;return c&&d&&d.searchFromCache&&(e=c+".searchFromCache.inputNewName(event);",f=c+".searchFromCache.clearSearch(event);"),a+='<div id="newHospitalPanel" class="user-input-search">',a+="<span>",a+='<i><input id="newHospitalName" oninput="'+e+'" value="" placeholder="'+(b.placeHolder||"")+'" maxlength="'+g+'" size="'+g+'"></i>',a+='<a id="clearKey" class="clear" onclick="'+f+'">x</a>',a+="</span>",a+='<ul id="relativeList"></ul>',a+="</div>"},this.doSaveNewItemName=function(){var a=document.querySelector("#newHospitalName").value,b=this.params.cacheDataList;if(!a||""===a||!a.isNormalText(2,50))return void(this.params.messageBox&&this.params.messageBox.show({msg:this.params.errorMsg,type:"alert",autoClose:!0}));for(var c=0;c<b.length;c++)b[c].name===a&&this.params.selectedTipListCallback(b[c].id);this.params.okCallBack&&this.params.okCallBack(a)},this.inputNewName=function(a){var b=[],c=this.params.cacheDataList,d=a.currentTarget.value||"",e=document.querySelector("#clearKey");d=d.replace(/\s|\n|\b/g,""),d.length>0?e.style.display="block":e.style.display="none";for(var f=0;f<c.length;f++){var g=c[f].name.indexOf(d);g>=0&&b.push(c[f])}this.showTipList(b)},this.showTipList=function(a){var b=document.querySelector("#relativeList"),c=[],d=this.params,e=d.pageJSObjName,f=d.pageJSObj,g=null;e&&f&&f.searchFromCache&&(g=e+".searchFromCache.selectSearchItem(event);");for(var h=0;h<a.length;h++)c.push('<li hId="'+a[h].id+'" onclick="'+g+'">'+a[h].name+"</li>");b.innerHTML=c.join("")},this.selectSearchItem=function(a){var b=a.currentTarget;this.params.selectedTipListCallback&&this.params.selectedTipListCallback(b.getAttribute("hId")),document.querySelector("#newHospitalName").value=b.innerHTML,document.querySelector("#relativeList").innerHTML="",document.querySelector("#clearKey").style.display="block",a.stopPropagation()},this.clearSearch=function(a){a.currentTarget.style.display="none",document.querySelector("#newHospitalName").value="",document.querySelector("#relativeList").innerHTML="",a.stopPropagation()},this.cancelNewHospitalCallback=function(){this.params.popWindow.hide(),this.params.cancelCallBack&&this.params.cancelCallBack()}},SearchFromDatabase=function(){this.params={},this.objects={},this.key=null,this.page=1,this.number=10,this.init=function(a){for(var b in a)this.params[b]=a[b];this.createTemplate(),setTimeout(function(){this.getSearchObjects(),this.attachEvent()}.bind(this),10)},this.createTemplate=function(){var a,b=this.params,c=[];a='onsubmit="return '+b.pageObjString+"."+b.searchObjString+'.handleKeyBoardSearch();"',c.push('<div class="form-search">'),c.push("<form "+a+">"),c.push("<span>"),c.push("<i>"+b.tipText+"</i>"),c.push('<input type="search" value="" placeholder="'+b.tipText+'" >'),c.push("</span>"),c.push("</form>"),b.tipList&&(c.push('<div class="search-tip-list-outer" style="display:none;">'),c.push('<div class="form-list search-tip-list" style="display:block;">'),c.push("</div>"),c.push("</div>")),b.bindObj.innerHTML=c.join("")},this.handleSearchPanelClick=function(){var a=this.objects.span,b=this.objects.input;a.className.indexOf("selected")<0&&(a.className="selected",b.style.display="block",b.focus())},this.getSearchObjects=function(){this.objects.input=this.params.bindObj.querySelectorAll("input")[0],this.objects.span=this.params.bindObj.querySelectorAll("span")[0],this.objects.form=this.params.bindObj.querySelectorAll("form")[0],this.params.tipList&&(this.objects.tipOuter=this.params.bindObj.querySelectorAll(".search-tip-list-outer")[0],this.objects.tipList=this.params.bindObj.querySelectorAll(".search-tip-list")[0])},this.handleSearchInput=function(a){var b={sendParameters:{}};return this.key=this.objects.input.value,this.params.tipList?""===this.key.trim()?(this.objects.tipList.innerHTML="",!1):(b.sendParameters.query_str=this.key,b.url=this.params.tipList.action,b.type="GET",b.asyn=!0,b.onSuccess=this.handleSearchInputSuccess.bind(this),b.onError=this.handleGetError.bind(this),this.objects.tipList.innerHTML='<span class="fa fa-spinner fa-pulse fa-2x fa-fw"></span>',this.objects.tipOuter.className="search-tip-list-outer  actived",this.params.tipList.mockData?this.handleSearchInputSuccess(this.params.tipList.mockData):this.params.ajax.send(b),void a.preventDefault()):!1},this.handleSearchInputSuccess=function(a){var b="",c=[],d=this.objects.tipOuter;if(d.className="search-tip-list-outer",0===a.code)if(c=a.data,c&&c.length>0){for(var e=0;e<c.length;e++)b+='<a href="javascript:void(0);" id="'+c[e]+'">'+c[e]+"</a>";this.objects.tipList.innerHTML=b,d.style.display="block"}else this.hideTipList();else this.handleGetError(a)},this.handleGetError=function(a){var b=a.msg;this.hideTipList(),a.msg&&""!==a.msg||(b="网络异常，请稍后再试"),this.params.messageBox.show({msg:b,type:"alert",autoClose:!0})},this.handleSearchTipList=function(a){var b=a.target,c=b.tagName.toLowerCase();"a"===c&&(this.key=b.getAttribute("id").trim(),this.objects.input.value=this.key,this.handleDoSearch())},this.handleDoSearch=function(){return this.key=this.objects.input.value,""==this.key.trim()?(this.messageBox.show({msg:"请输入搜索关键字",type:"alert",autoClose:!0}),!1):(this.objects.input.blur(),this.params.beforeSearchFunction&&this.params.beforeSearchFunction(),this.params.callback&&this.params.callback(this.key),void this.hideTipList())},this.handleKeyBoardSearch=function(){try{this.handleDoSearch()}catch(a){return!1}return!1},this.handleBlur=function(a){var b=a.currentTarget,c=b.parentNode;b.value&&""!==b.value||(c.className="")},this.hideTipList=function(){this.objects.tipList.innerHTML="",this.objects.tipOuter.className="search-tip-list-outer",this.objects.tipOuter.style.display="none"},this.attachEvent=function(){this.params.bindObj.addEventListener("click",function(){this.handleSearchPanelClick()}.bind(this)),this.objects.input.addEventListener("input",function(){this.handleSearchInput(event)}.bind(this)),this.objects.input.addEventListener("blur",function(){this.handleBlur(event)}.bind(this)),this.params.tipList&&this.objects.tipList.addEventListener("click",function(a){this.handleSearchTipList(a)}.bind(this))}},SkipPage=function(){this.configs={},this.isFirstLoad=!0,this.isGettingData=!1,this.originalOnSuccess=null,this.originalOnError=null,this.skipPosition=0,this.init=function(a){this.configs=a,this.originalOnSuccess=this.configs.param.onSuccess,this.originalOnError=this.configs.param.onError,this.configs.param.onError=this.onError.bind(this),this.configs.param.onSuccess=this.onSuccess.bind(this),this.loadData(this.configs.param),this.attachEvent()},this.loadData=function(a){this.isFirstLoad===!1&&this.starAnimate(),this.isGettingData=!0,this.configs.ajax.send(a)},this.onSuccess=function(a){0===a.code||"0"===a.code?(this.setPageInfo(a),this.originalOnSuccess&&this.originalOnSuccess(a),this.endAnimate()):this.onError(a),this.isGettingData=!1},this.setPageInfo=function(a){var b;b=this.configs.isSelfInterface===!0?a.data[2]:a.data[0],this.configs.pageInfo.totalCount=b.totalCount||0,this.configs.pageInfo.totalPage=b.totalPage||0,this.configs.pageInfo.pageNo=0|b.pageNo,this.configs.param.sendParameters.page=b.pageNo||0},this.onError=function(a){this.originalOnError&&this.originalOnError(a),this.isGettingData=!1},this.handleScroll=function(a){var b=this.configs.scrollObj||document.querySelectorAll("body")[0];return this.isFirstLoad===!0?!1:this.isGettingData===!0?!1:b.scrollTop<=0&&this.configs.needSkipPrev?(this.loadPreviousPage(),!1):b.scrollTop>=b.scrollHeight-b.clientHeight&&this.configs.needSkipNext?(this.loadNextPage(),!1):void 0},this.loadPreviousPage=function(){var a=this.configs.pageInfo;a.pageNo===this.configs.pageInfo.totalPage||(this.configs.param.sendParameters.page++,this.skipPosition=0,this.loadData(this.configs.param))},this.loadNextPage=function(){var a=this.configs.pageInfo;a.pageNo===this.configs.pageInfo.totalPage||(this.configs.param.sendParameters.page++,this.skipPosition=1,this.loadData(this.configs.param))},this.appendHtmlNode=function(a,b,c){var d;d=document.createElement("span"),d.setAttribute("id","page_"+c),d.innerHTML=a,1===this.skipPosition||this.isFirstLoad===!0?b.appendChild(d):0===this.skipPosition&&(b.childNodes&&b.childNodes.length>=1?b.insertBefore(d,b.childNodes[0]):b.appendChild(d)),setTimeout(function(){this.doScroll(),this.isFirstLoad=!1}.bind(this),0)},this.doScroll=function(){var a,b,c=this.configs.scrollObj||document.querySelectorAll("body")[0],d=(this.configs.scrollObj||c).scrollTop,e=10;return this.isFirstLoad===!0?(c.scrollTop=c.scrollHeight-document.documentElement.clientHeight-e,!1):(a=document.querySelector("#page_"+this.configs.pageInfo.pageNo),b=window.getComputedStyle(a,null).height,b&&"auto"!==b||(b=a.getBoundingClientRect().height),1===this.skipPosition?d=d-(b||e)+e:0===this.skipPosition&&(d=d+(b||e)-e),void(c.scrollTop=d))},this.starAnimate=function(){var a=this.configs.messageBox,b='<span class="fa fa-spinner fa-pulse fa-2x fa-fw"></span>数据加载...';a&&a.show({msg:b,type:"loading",autoClose:!1})},this.endAnimate=function(){var a=this.configs.messageBox;a&&a.hide()},this.attachEvent=function(){var a=this.configs.scrollObj||window;a.addEventListener("scroll",function(a){this.handleScroll(a)}.bind(this))}},SlideImage=function(){this.param={},this.slideImage={slidePanel:null,imagePanel:null,dotPanel:null},this.currentPicIndex=0,this.imageLi=null,this.touchInfo={start:{pageX:0,pageY:0},end:{pageX:0,pageY:0}},this.init=function(a){this.param=a,(null===this.param.position||void 0===this.param.position)&&(this.param.position=1),this.buildImagePanel(a.images)},this.buildImagePanel=function(a){var b="",c="",d="",e=[];if(d=1===this.param.position?'style="left:-100%;"':'style="left:100%;"',a&&a.length>0){e=this.slideImage,e.imagePanel=document.createElement("ul"),e.dotPanel=document.createElement("ul"),e.imagePanel.className="image",e.dotPanel.className="dot";for(var f=0;f<a.length;f++)b+='<li slideIndex="'+f+'" '+(0===f?"":d)+'><img id="image1" src="'+a[f]+'" slideIndex="'+f+'"/></li>',c+='<li class="'+(0===f?"selected":"")+'"></li>';this.slideImage.imagePanel.innerHTML=b,this.slideImage.dotPanel.innerHTML=c,this.param.bind.appendChild(this.slideImage.imagePanel),this.param.bind.appendChild(this.slideImage.dotPanel),setTimeout(function(){this.resizePanel(),this.activeSlide()}.bind(this),1e3),this.attachEvent()}},this.startAutoSlide=function(){this.param.images.length>1&&this.param.autoSlide&&(this.param.timer=setInterval(function(){this.doSlideEvent(this.currentPicIndex,this.param.position)}.bind(this),this.param.autoTime))},this.resizePanel=function(){for(var a=(document.documentElement.clientWidth,this.param.bind.querySelectorAll("img")),b=this.param.bind.querySelectorAll(".image")[0],c=0,d=0;d<a.length;d++)c=Math.max(c,a[d].naturalHeight);b.setAttribute("style","height:"+c+"px")},this.handleTouchStart=function(a){this.clearSlide(),this.touchInfo.start.pageX=a.pageX||a.touches[0].pageX,a.preventDefault(),a.stopPropagation()},this.handleTouchMove=function(a){this.touchInfo.end.pageX=a.pageX||a.touches[0].pageX,a.preventDefault(),a.stopPropagation()},this.handleTouchEnd=function(a){var b=this.touchInfo,c=0;a.preventDefault(),a.stopPropagation(),c=parseInt(a.target.getAttribute("slideIndex"),10),b.start.pageX-b.end.pageX<0?this.doSlideEvent(c,1):b.start.pageX-b.end.pageX>0&&this.doSlideEvent(c,0),this.activeSlide()},this.doSlideEvent=function(a,b){var c=a;return this.param.images.length<=1?!1:(this.imageLi||(this.imageLi=this.param.bind.querySelectorAll(".image li")),1===b?(a--,0>a&&(a=this.imageLi.length-1)):(a++,a>=this.imageLi.length&&(a=0)),this.currentPicIndex=a,this.selectedDot(this.currentPicIndex),void this.doAnimate(this.imageLi,this.currentPicIndex,c,b))},this.selectedDot=function(a){for(var b=this.param.bind.querySelectorAll(".dot li"),c=0;c<b.length;c++)c===a?b[c].className="selected":b[c].className=""},this.doAnimate=function(a,b,c,d){for(var e=510,f=0;f<a.length;f++)f!==c&&(a[f].style.top="-9999px",a[f].style.left=1===d?"-100%":"100%",a[f].style.top="0",a[f].className="active");a[c].className="active",a[c].style.left=1===d?"100%":"-100%",setTimeout(function(){a[c].className="",a[c].style.top="-9999px",a[c].style.left=1===d?"-100%":"100%",a[c].style.top="0"},e),a[b].style.left=0},this.clearSlide=function(){this.param.autoSlide&&clearInterval(this.param.timer)},this.activeSlide=function(){this.param.autoSlide&&this.startAutoSlide()},this.attachEvent=function(){this.param.bind.addEventListener("touchstart",function(a){this.handleTouchStart(a)}.bind(this)),this.param.bind.addEventListener("touchmove",function(a){this.handleTouchMove(a)}.bind(this)),this.param.bind.addEventListener("touchend",function(a){this.handleTouchEnd(a)}.bind(this)),window.addEventListener("resize",function(){this.resizePanel()}.bind(this)),window.addEventListener("blur",function(){this.clearSlide()}.bind(this)),window.addEventListener("unload",function(){this.clearSlide()}.bind(this)),window.addEventListener("focus",function(){this.activeSlide()}.bind(this))}},SlideTabs=function(){this.param={},this.init=function(a){this.param=a,this.attachEvent()},this.handleTabClick=function(a){var b=a.target,c=b.tagName.toLowerCase();if("li"===c||"span"===c)if("span"===c)b=b.parentNode;else if(b.className===this.param.selectedCss)return!1;this.doAnimate(b)},this.doAnimate=function(a){for(var b=this.param.trigger.querySelectorAll("li"),c=0;c<b.length;c++)b[c]===a?b[c].className=this.param.selectedCss:b[c].className="";for(var d=this.param.responser,e=0;e<d.length;e++)d[e].className.indexOf(a.getAttribute("for"))>=0?d[e].style.display="block":d[e].style.display="none";this.param.callBack&&this.param.callBack(a)},this.attachEvent=function(){this.param.trigger.addEventListener("click",function(a){this.handleTabClick(a)}.bind(this))}},template=function(a,b){var c,d={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g},e=/(.)^/,f=new RegExp([(d.interpolate||e).source,(d.evaluate||e).source].join("|")+"|$","g"),g={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},h=/\\|'|\r|\n|\t|\u2028|\u2029/g,i=0,j="__p+='";a.replace(f,function(b,c,d,e){return j+=a.slice(i,e).replace(h,function(a){return"\\"+g[a]}),c&&(j+="'+\n((__t=("+c+"))==null?'':__t)+\n'"),d&&(j+="';\n"+d+"\n__p+='"),i=e+b.length,b}),j+="';\n",d.variable||(j="with(obj||{}){\n"+j+"}\n"),j="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+j+"return __p;\n";try{c=new Function(d.variable||"obj",j)}catch(k){throw k.source=j,k}if(b)return c(b);var l=function(a){return c.call(this,a)};return l.source="function("+(d.variable||"obj")+"){\n"+j+"}",l},TimeSlide=function(){this.params={scrollCell:50,scrollBigCell:90,animateTimer:0,animateStep:300,countTimer:0,countStep:10,countNumber:0,countMin:10,hoursObj:null,minutesObj:null,secondsObj:null,pageInfo:{start:{pageY:0},end:{pageY:0},move:{startY:0,endY:0}}},this.isTouching=!1,this.init=function(a){if(a)for(var b in a)this.params[b]=a[b];a.timeFormat?this.getFormat(a.timeFormat):this.getFormat("00:00"),this.buildTimePanel(),setTimeout(function(){this.setDefaultValue(),this.resizeTimePanel(),this.attacheEvent()}.bind(this),0)},this.getFormat=function(a){var b=a.split(":");this.currentTime={},/^\d+$/.test(b[0])&&(this.currentTime.hours=parseInt(b[0],10)),/^\d+$/.test(b[1])&&(this.currentTime.minutes=parseInt(b[1],10)),/^\d+$/.test(b[2])&&(this.currentTime.seconds=parseInt(b[2],10))},this.buildTimePanel=function(){var a=this.params,b=this.currentTime,c=[],d=[],e=[],f=0;"number"===(typeof b.hours).toLowerCase()&&(c=this.getTimeHtml(24,"hours"),f+=a.width),"number"===(typeof b.minutes).toLowerCase()&&(d=this.getTimeHtml(60,"minutes",this.params.timeStep),f+=a.width),"number"===(typeof b.seconds).toLowerCase()&&(e=this.getTimeHtml(60,"seconds",this.params.timeStep),f+=a.width),a.triggerTouchObj.innerHTML=this.getGapHtml()+c.join("")+d.join("")+e.join(""),a.triggerTouchObj.style.width=f+"px"},this.getGapHtml=function(){var a=[],b=Math.floor(this.params.showTimeSize/2)*this.params.scrollCell+"px";return a.push('<div class="slide-gap" style="top:'+b+';">'),a.push("<span>:</span>"),"number"===(typeof this.currentTime.seconds).toLowerCase()&&a.push("<span>:</span>"),a.push("</div>"),a.join("")},this.getTimeHtml=function(a,b,c){var d=[],e='<div class="time-slider-outer" for="'+(b||"")+'"><ul for="'+(b||"")+'">',f='</ul><div class="time-mask-top" for="'+(b||"")+'"></div><div class="time-mask-foot" for="'+(b||"")+'"></div></div>';d.push(e),d.push("<li></li>"),this.params.showTimeSize&&this.params.showTimeSize>3&&d.push("<li></li>");for(var g=0;a>g;g++){var h=g%(c||1);(0===h||g===a-1)&&d.push('<li for="'+(b||"")+'">'+(10>g?"0"+g:g)+"</li>")}return d.push("<li></li>"),d.push(f),d},this.setDefaultValue=function(){for(var a,b=this.currentTime,c=this.params.triggerTouchObj.querySelectorAll(".time-slider-outer"),d=0;d<c.length;d++)a=c[d].getAttribute("for"),a&&(this.params[a+"Obj"]=c[d].querySelectorAll("ul")[0]);if("number"===(typeof b.hours).toLowerCase()&&this.doScroll(this.params.hoursObj,parseInt(b.hours,10)),"number"===(typeof b.minutes).toLowerCase()){var e=Math.ceil(parseInt(b.minutes,10)/this.params.timeStep);this.doScroll(this.params.minutesObj,e)}if("number"===(typeof b.seconds).toLowerCase()){var f=Math.ceil(parseInt(b.seconds,10)/this.params.timeStep);this.doScroll(this.params.secondsObj,f)}this.setShowValue()},this.doScroll=function(a,b){0>b&&(b=0),a.style.top="-"+b*this.params.scrollCell+"px"},this.setShowValue=function(){var a=this.currentTime,b="";"number"===(typeof a.hours).toLowerCase()&&(b+=a.hours<10?"0"+a.hours:a.hours),"number"===(typeof a.minutes).toLowerCase()&&(b+=":",b+=a.minutes<10?"0"+a.minutes:a.minutes),"number"===(typeof a.seconds).toLowerCase()&&(b+=":",b+=a.seconds<10?"0"+a.seconds:a.seconds),this.params.showTimeObj&&(this.params.showTimeObj.innerHTML=b)},this.handleTouchStar=function(a){var b=this.params.pageInfo;b.start.pageY=a.pageY||a.touches[0].pageY,b.move.startY=b.start.pageY,this.params.countTimer=setInterval(function(){this.params.countNumber++}.bind(this),this.params.countStep),this.isTouching=!0,a.preventDefault(),a.stopPropagation()},this.handleTouchMove=function(a){var b=this.params.pageInfo;b.end.pageY=a.pageY||a.touches[0].pageY,this.isTouching&&(b.move.startY=b.move.endY,b.move.endY=b.end.pageY),a.preventDefault(),a.stopPropagation()},this.handleTouchEnd=function(a){var b,c=null;clearInterval(this.params.countTimer),b=a.target.getAttribute("for"),b&&(c=this.params[b+"Obj"],c&&(this.isTouching===!0?this.handleScroll(c,b):this.handleScroll(c,b))),a.preventDefault(),a.stopPropagation()},this.handleScroll=function(a,b){var c,d,e=this.params.pageInfo,f=e.end.pageY-e.start.pageY,g=!1,h=0;c=this.currentTime[b],"hours"===b&&(h=23,d=1),("minutes"===b||"seconds"===b)&&(h=59,d=this.params.timeStep),this.params.countNumber<this.params.countMin&&(g=!0),"minutes"!==b&&"seconds"!==b||c!==h||(c=h+1),0>f?c+=g?this.params.fastSkip*d:d:f>0&&(c-=g?this.params.fastSkip*d:d),c>=h&&(c=h),0>=c&&(c=0),this.currentTime[b]=c,
this.doScroll(a,Math.ceil(c/d)),this.setShowValue(),this.clearAfterScroll()},this.clearAfterScroll=function(){this.params.pageInfo={start:{pageY:0},end:{pageY:0},move:{startY:0,endY:0}},this.params.countNumber=0,this.isTouching=!1},this.resizeTimePanel=function(){var a,b,c,d,e,f,g=this.params;if(g.showTimeSize>3){c=g.scrollCell*g.showTimeSize,d=Math.floor(g.showTimeSize/2)*g.scrollCell,a=this.params.triggerTouchObj,b=a.querySelectorAll(".time-slider-outer"),e=a.querySelectorAll(".time-mask-top"),f=a.querySelectorAll(".time-mask-foot"),a.style.height=c+"px";for(var h=0;h<b.length;h++)b[h].style.height=c+"px",e[h].style.height=d+"px",f[h].style.height=d+"px"}},this.resetTimePanel=function(a){if(a||(a={},this.params.hoursObj&&(a.hours=0),this.params.minutesObj&&(a.minutes=0),this.params.secondsObj&&(a.seconds=0)),this.params.hoursObj&&(this.currentTime.hours=0,this.doScroll(this.params.hoursObj,parseInt(a.hours,10))),this.params.minutesObj){var b=Math.ceil(parseInt(a.minutes,10)/this.params.timeStep);this.doScroll(this.params.minutesObj,b),this.currentTime.minutes=0}if(this.params.secondsObj){var c=Math.ceil(parseInt(a.seconds,10)/this.params.timeStep);this.doScroll(this.params.secondsObj,c),this.currentTime.seconds=0}},this.attacheEvent=function(){var a=this.params.triggerTouchObj;a.addEventListener("touchstart",function(a){this.handleTouchStar(a)}.bind(this)),a.addEventListener("touchmove",function(a){this.handleTouchMove(a)}.bind(this)),a.addEventListener("touchend",function(a){this.handleTouchEnd(a)}.bind(this))}},UploadImage=function(a){this.canvas=null,this.param={},this.init=function(a){this.param=a,this.createCanvas()},this.checkImage=function(a,b,c){var d=!1,e=Math.ceil(a[0].size/1024),f=new FileReader;return this.param.fileType.forEach(function(b){a[0].type.indexOf(b)>=0&&(d=!0)}),d?(f.onload=function(){var a=f.result;e>this.param.fileMemory?this.reduceImage(a,b,c):this.setImageURL(a,b,c)}.bind(this),void f.readAsDataURL(a[0])):(this.param.messageBox.show({msg:"请选择正确的图片文件",type:"alert",autoClose:!0}),!1)},this.setImageURL=function(a,b,c){b&&b.setAttribute("src",a),c&&c(a)},this.reduceImage=function(a,b,c){var d=new Image;d.src=a,d.onload=function(){this.setImageToCanvas(d,b,c)}.bind(this)},this.setImageToCanvas=function(a,b,c){var d=this.canvas,e=this.param.fileSize,f=1,g=a.naturalWidth||0,h=a.naturalHeight||0;if(g>e.width&&h>e.height){var i=e.width/g,j=e.height/h;f=Math.min(i,j)}else g>e.width?f=e.width/g:h>e.height&&(f=e.height/h);g=parseInt(f*g,10),h=parseInt(f*h,10),d.setAttribute("width",g),d.setAttribute("height",h);var k=d.getContext("2d");k.drawImage(a,0,0,g,h);var l=d.toDataURL("image/jpeg",this.param.dip);this.setImageURL(l,b,c)},this.createCanvas=function(){this.canvas=document.createElement("canvas")},this.init(a)},WeixinSDK=function(){this.params={tokenTime:0,timeStep:718e4},this.wxConfig=null,this.init=function(a){a.app_id=SYS_VAR.app_id,a.app_secret=SYS_VAR.app_secret,a.url=encodeURIComponent(window.location.href.split("#")[0]),a.interfaceUrl=SYS_VAR.SERVER_ADDRESS+"doc/share_qrcode_info";for(var b in a)this.params[b]||(this.params[b]=a[b]);this.getSignature()},this.getSignature=function(){var a=this.params,b={sendParameters:{}};b.sendParameters.share_url=a.url,b.url=a.interfaceUrl,b.type="GET",b.asyn=!0,b.onSuccess=this.handleGetSignatureSuccess.bind(this),b.onError=this.handleError.bind(this),a.ajax.send(b)},this.handleGetSignatureSuccess=function(a){var b=a;0===b.code||"0"===b.code?(this.wxConfig=b.data[0],this.getWXAPIInitConfig()):this.handleError(a)},this.getWXAPIInitConfig=function(){var a={};a=this.wxConfig?{debug:this.params.debug||null,appId:this.params.app_id,jsApiList:this.params.jsApiList,timestamp:this.wxConfig.timestamp,nonceStr:this.wxConfig.noncestr,signature:this.wxConfig.signature}:null,this.doWXAPIInit(a)},this.doWXAPIInit=function(a){var b=this.params;a?(wx.config(a),wx.ready(function(){b.successCallback()}.bind(this)),wx.error(function(){b.errorCallback()}.bind(this))):b.errorCallback()},this.handleError=function(){this.wxConfig=null,this.getWXAPIInitConfig()}};String.prototype.isNumber=function(a,b){var c,d,e=this;return c=getRegExpRange(a,b),d=new RegExp("^\\d"+c+"$"),d.test(e)},String.prototype.isNormalText=function(a,b){var c,d,e=this,f=new RegExp("[~|!|@|#|$|%|^|&|*]","g");return c=getRegExpRange(a,b),d=new RegExp("^(\\d|\\w|[一-龥])"+c+"$"),d.test(e)&&!f.test(e)},String.prototype.isNormalTextArea=function(a,b){var c,d,e=this;return c=getRegExpRange(a,b),d=new RegExp("^."+c+"$"),d.test(e)},String.prototype.isPassword=function(a,b){var c,d,e=this;return c=getRegExpRange(a,b),d=new RegExp("^."+c+"$"),d.test(e)},String.prototype.isPhoneNumber=function(){var a,b,c=this;return a=getRegExpRange(10,!1),b=new RegExp("^1\\d"+a+"$"),b.test(c)},String.prototype.getValueFromUrl=function(){var a=[],b=[],c={};if(""!==this){if(a=this.match(/(.[^?|&]+)=/g),b=this.match(/=(.[^&]*)/g),!a||!b)return{};for(var d=0;d<a.length;d++){var e=a[d].replace(/=|\?|&/g,""),f=decodeURIComponent(b[d]).replace("=","");c[e]=f}}return c},String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")};