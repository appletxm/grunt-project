var authorLogin={ajax:null,messageBox:null,validateTarget:null,validateCodeActive:!1,init:function(){this.ajax=new Ajax,this.messageBox=new MessageBox,this.attachEvent()},doBind:function(){var a=this.validate();if(!a.res)return void this.messageBox.show({msg:a.msg,type:"alert",autoClose:!0});var b={sendParameters:{phoneNum:document.querySelector("#phoneNo").value,password:document.querySelector("#password").value}};b.url=SYS_VAR.SERVER_ADDRESS+"doc/login/",b.type="GET",b.asyn=!0,b.onSuccess=this.onSuccess.bind(this),b.onError=this.onError.bind(this),b.mssage=this.messageBox,this.ajax.send(b)},validate:function(){var a=document.querySelector("#phoneNo").value,b=document.querySelector("#password").value;return a&&""!==a&&/^1[1-9][0-9]\d{4,8}$/.test(a)?b&&""!==b?{res:!0,msg:""}:{res:!1,msg:"请输入您的密码"}:{res:!1,msg:"请输入正确的手机号码"}},onSuccess:function(a){if(0===a.code){var b=window.location.search,c=new RegExp("redirect_uri=([^&?]*)","ig");if(b.match(c)){var d=b.match(c)[0].substring("redirect_uri".length+1);window.location.href=d}else WeixinJSBridge.call("closeWindow")}else this.onError(a)},onError:function(a){clearTimeout(this.messageBox.timer),setTimeout(function(){this.messageBox.show({msg:a.msg||"",type:"alert",autoClose:!0})}.bind(this),0)},attachEvent:function(){var a=document.querySelector("#bindUser");a.addEventListener("click",function(a){this.doBind()}.bind(this),!1)}};authorLogin.init();