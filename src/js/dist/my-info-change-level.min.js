var myInfoChangeLevel={ajax:null,messageBox:null,title:null,init:function(){this.ajax=new Ajax,this.messageBox=new MessageBox,this.attachEvent(),this.getUrlTitle()},getUrlTitle:function(){var a=window.location.search.getValueFromUrl();this.title=decodeURIComponent(a.title||""),this.getLevelList()},getLevelList:function(){var a={sendParameters:{}};a.url=SYS_VAR.SERVER_ADDRESS+"doc/department_and_title/",a.type="GET",a.asyn=!0,a.onSuccess=this.handleGetLevelSuccess.bind(this),a.onError=this.handleError.bind(this),a.mssage=this.messageBox,this.ajax.send(a)},handleGetLevelSuccess:function(a){if(0===a.code){var b=a.data[0].titleList;document.querySelector("#level_list").innerHTML=this.getLevelListHtml(b)}else this.handleError(a)},getLevelListHtml:function(a){for(var b,c="",d=0;d<a.length;d++)b=this.title===a[d].titleName?'class="check-list no-arrow checked"':'class="check-list no-arrow"',c+="<a "+b+' value="'+a[d].titleId+'" onclick="myInfoChangeLevel.doSave(event)">'+a[d].titleName+"</a>";return c},doSave:function(a){var b=a.currentTarget,c=b.getAttribute("value"),d={sendParameters:{titleId:c}};d.url=SYS_VAR.SERVER_ADDRESS+"doc/info_update/",d.type="GET",d.asyn=!0,d.onSuccess=this.handleSaveSuccess.bind(this),d.onError=this.handleError.bind(this),d.mssage=this.messageBox,this.toggleChecked(b),this.ajax.send(d)},handleSaveSuccess:function(a){0===a.code?window.location.href="my-information.html":this.handleError(a)},toggleChecked:function(a){for(var b=document.querySelectorAll("#level_list .check-list"),c=0;c<b.length;c++)a===b[c]?b[c].className="check-list no-arrow checked":b[c].className="check-list no-arrow"},handleError:function(a){this.messageBox.show({msg:a.msg,type:"alert",autoClose:!0})},attachEvent:function(){}};myInfoChangeLevel.init();