"use strict";var caseFilesList={data:[{patientId:10,caseFilesId:1,content:"骨质疏松好久了，一！",time:"2015-01-23",imagesUrl:"http://file-www.sioe.cn/201109/14/222211817.jpg,http://file-www.sioe.cn/201109/14/222211817.jpg,http://file-www.sioe.cn/201109/14/222211817.jpg"},{patientId:10,caseFilesId:2,content:"2骨质疏松好久了，一直没有时间去看看医生！",time:"2015-01-24",imagesUrl:"http://file-www.sioe.cn/201109/14/222211817.jpg,http://file-www.sioe.cn/201109/14/222211817.jpg,http://file-www.sioe.cn/201109/14/222211817.jpg"}],msg:"success",code:0},patientCaseFiles={server:SYS_VAR.SERVER_ADDRESS,messageBox:null,ajax:null,slideTab:null,requestUrl:SYS_VAR.SERVER_ADDRESS,init:function(){var a=window.location.search,b=a.getValueFromUrl();this.messageBox=new MessageBox,this.ajax=new Ajax,this.patientId=b.patient_id,this.getPCFList(),this.attachEvent()},getPCFList:function(){var a=this,b={url:SYS_VAR.SERVER_ADDRESS+"doc/medication_group_detail/",type:"GET",asyn:!0,onSuccess:a.handleGetInfoSuccess.bind(a),onError:a.handleError.bind(a),sendParameters:{patientId:a.patientId}};this.ajax.send(b),this.handleGetInfoSuccess(caseFilesList)},handleGetInfoSuccess:function(a){var b=[],c=document.querySelector("#list-content");if(0===a.code){var d=a.data;d&&""!==d?(d.forEach(function(a){var c=a.imagesUrl.split(",");b.push('<li><p class="content">'+(a.content.length>10?a.content.substring(0,10)+"...":a.content)+"</p>"),b.push('<p class="timeBox">'+a.time+"</p>"),b.push('<div class="imgBox">'),c.forEach(function(a){b.push('<img src="'+a+'">')}),b.push('</div><p class="more"><a href="patient-case-files-details.html?case_file_id='+a.caseFilesId+'">查看详情</a></p></li>')}),c.innerHTML=b.join("")):c.innerHTML="暂无病情档案~"}},handleError:function(a){this.messageBox.show({msg:a.msg||"获取失败，请刷新本页！",type:"alert",autoClose:!0})},attachEvent:function(){var a=document.querySelector("#send-messages");a.addEventListener("click",this.handleClick.bind(this))},handleClick:function(){console.log("click send button!")}};patientCaseFiles.init();