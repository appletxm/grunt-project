"use strict";var mockPatientDetail={data:[{patientId:10,name:"刘德华",note:"糖尿病-李四",city:"广东湛江坡头区",headUrl:"http://file-www.sioe.cn/201109/14/222211817.jpg"}],msg:"success",code:0},patientInfoNew={server:SYS_VAR.SERVER_ADDRESS,messageBox:null,ajax:null,popWindow:null,slideTab:null,requestUrl:SYS_VAR.SERVER_ADDRESS,init:function(){this.messageBox=new MessageBox,this.ajax=new Ajax,this.patientId=getQueryString("patient_id"),this.getPatientDetail(),this.getMessagesTop(),this.getMessagesDisturb(),this.attachEvent()},attachEvent:function(){var a=document.querySelector("#timeSwitch"),b=document.querySelector("#timeSwitch1");a.addEventListener("click",function(b){this.handleClick(b,a)}.bind(this)),b.addEventListener("click",function(a){this.handleClick(a,b)}.bind(this))},handleClick:function(a,b){var c=a.target,d=c.getAttribute("data-name"),e=c.tagName.toLowerCase();("em"===e||"b"===e)&&this.doToggleTime(b,d),a.preventDefault()},doToggleTime:function(a,b){var c=a.querySelector("input"),d=parseInt(c.value,10);d=1===d?0:1,c.value=d,this.toggleTimeSwitch(1===d,a,b),"messages-top"===b&&this.setMessagesTop(),"messages-disturb"===b&&this.setMessagesDisturb()},toggleTimeSwitch:function(a,b,c){var d=b.querySelector("input");a?(b.className="animate-check",d.value=1):(b.className="animate-check close",d.value=0),"messages-top"===c&&this.setMessagesTop(d.value),"messages-disturb"===c&&this.setMessagesDisturb(d.value)},doRequest:function(a,b,c){var d=b;d.url=this.requestUrl+a,d.type="GET",d.asyn=!0,d.onSuccess=c.bind(this),d.onError=this.handleGetError.bind(this),d.mssage=this.msessageBox,this.ajax.send(d)},handleGetError:function(a){this.messageBox.show({msg:a.msg,type:"alert",autoClose:!0})},getPatientDetail:function(){({sendParameters:{patientId:this.patientId}}),this.getPatientDetailSuccess;this.getPatientDetailSuccess(mockPatientDetail)},getPatientDetailSuccess:function(a){if(0===a.code&&a.data&&a.data.length>0){var b=a.data[0],c=encodeURIComponent(b.note);document.querySelector("#noto-name").href="patient-info-name-noto.html?patient_id="+b.patientId+"&patient_note_name="+c,document.querySelector("#patient-base-info").href="patient-info-base.html?patient_id="+b.patientId,document.querySelector("#patient-case-files").href="patient-case-files.html?patient_id="+b.patientId,document.querySelector("#patient-chat-images").href="patient-chat-images.html?patient_id="+b.patientId,document.querySelector("#patient-illness-note").href="patient-illness-note.html?patient_id="+b.patientId,document.querySelector("#headUrl").src=b.headUrl,document.querySelector("#name").innerHTML=b.name,document.querySelector("#city").innerHTML=b.city,document.querySelector("#name-note").innerHTML=b.note}},getMessagesTop:function(){var a=document.querySelector("#timeSwitch"),b="doc/get_disturb/",c=this.hanlderGetStatusSuccess,d={sendParameters:{}};this.doRequest(b,d,c),this.toggleTimeSwitch(!0,a)},getMessagesDisturb:function(){var a=document.querySelector("#timeSwitch1"),b="doc/get_disturb/",c=this.hanlderGetStatusSuccess,d={sendParameters:{}};this.doRequest(b,d,c),this.toggleTimeSwitch(!1,a)},setMessagesTop:function(){var a=document.querySelector("#timeSwitch"),b="doc/get_disturb/",c=this.hanlderGetStatusSuccess,d={sendParameters:{}};this.doRequest(b,d,c),this.toggleTimeSwitch(!0,a)},setMessagesDisturb:function(){var a=document.querySelector("#timeSwitch1"),b="doc/get_disturb/",c=this.hanlderGetStatusSuccess,d={sendParameters:{}};this.doRequest(b,d,c),this.toggleTimeSwitch(!1,a)},hanlderGetStatusSuccess:function(a){console.log(a)}};patientInfoNew.init();