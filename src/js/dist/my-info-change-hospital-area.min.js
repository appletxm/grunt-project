var cityListData={code:0,msg:"success",data:[{id:123123,name:"广州"},{id:123124,name:"佛山"}]},myInfoChangeHospitalArea={ajax:null,messageBox:null,init:function(){this.ajax=new Ajax,this.messageBox=new MessageBox,this.attachEvent(),this.getCityList()},getCityList:function(){var a=window.location.search.match(/(.[^?|&]+)=/g),b=window.location.search.match(/=(.[^&]*)/g);if(!a||!b)return!1;var c={};a.forEach(function(a,d){c[a.replace(/=|\?|&/g,"")]=b[d].replace("=","")}),document.querySelector("#city_list").innerHTML='<a class="selected">'+decodeURIComponent(c.name)+"</a>";var d={sendParameters:{pid:c.pid}};d.url=SYS_VAR.SERVER_ADDRESS+"doc/city_list/",d.type="GET",d.asyn=!0,d.onSuccess=this.handleGetCitySuccess.bind(this),d.onError=this.handleError.bind(this),d.mssage=this.messageBox,this.ajax.send(d)},handleGetCitySuccess:function(a){var b=document.querySelector("#city_list"),c=b.innerHTML;if(0===a.code){var d=a.data;c+=this.getCityListHtml(d),b.innerHTML=c}else this.handleError(a)},getCityListHtml:function(a){for(var b="",c=0;c<a.length;c++)b+='<a href="my-info-change-hospital-list.html?cityId='+a[c].id+"&name="+a[c].name+'">'+a[c].name+"</a>";return b},handleError:function(a){this.messageBox.show({msg:a.msg,type:"alert",autoClose:!0})},attachEvent:function(){}};myInfoChangeHospitalArea.init();