var SlideImage=function(){this.param={},this.slideImage={slidePanel:null,imagePanel:null,dotPanel:null},this.currentPicIndex=0,this.imageLi=null,this.touchInfo={start:{pageX:0,pageY:0},end:{pageX:0,pageY:0}},this.init=function(a){this.param=a,(null===this.param.position||void 0===this.param.position)&&(this.param.position=1),this.buildImagePanel(a.images)},this.buildImagePanel=function(a){var b="",c="",d="",e=[];if(d=1===this.param.position?'style="left:-100%;"':'style="left:100%;"',a&&a.length>0){e=this.slideImage,e.imagePanel=document.createElement("ul"),e.dotPanel=document.createElement("ul"),e.imagePanel.className="image",e.dotPanel.className="dot";for(var f=0;f<a.length;f++)b+='<li slideIndex="'+f+'" '+(0===f?"":d)+'><img id="image1" src="'+a[f]+'" slideIndex="'+f+'"/></li>',c+='<li class="'+(0===f?"selected":"")+'"></li>';this.slideImage.imagePanel.innerHTML=b,this.slideImage.dotPanel.innerHTML=c,this.param.bind.appendChild(this.slideImage.imagePanel),this.param.bind.appendChild(this.slideImage.dotPanel),setTimeout(function(){this.resizePanel(),this.activeSlide()}.bind(this),1e3),this.attachEvent()}},this.startAutoSlide=function(){this.param.images.length>1&&this.param.autoSlide&&(this.param.timer=setInterval(function(){this.doSlideEvent(this.currentPicIndex,this.param.position)}.bind(this),this.param.autoTime))},this.resizePanel=function(){for(var a=(document.documentElement.clientWidth,this.param.bind.querySelectorAll("img")),b=this.param.bind.querySelectorAll(".image")[0],c=0,d=0;d<a.length;d++)c=Math.max(c,a[d].naturalHeight);b.setAttribute("style","height:"+c+"px")},this.handleTouchStart=function(a){this.clearSlide(),this.touchInfo.start.pageX=a.pageX||a.touches[0].pageX,a.preventDefault(),a.stopPropagation()},this.handleTouchMove=function(a){this.touchInfo.end.pageX=a.pageX||a.touches[0].pageX,a.preventDefault(),a.stopPropagation()},this.handleTouchEnd=function(a){var b=this.touchInfo,c=0;a.preventDefault(),a.stopPropagation(),c=parseInt(a.target.getAttribute("slideIndex"),10),b.start.pageX-b.end.pageX<0?this.doSlideEvent(c,1):b.start.pageX-b.end.pageX>0&&this.doSlideEvent(c,0),this.activeSlide()},this.doSlideEvent=function(a,b){var c=a;return this.param.images.length<=1?!1:(this.imageLi||(this.imageLi=this.param.bind.querySelectorAll(".image li")),1===b?(a--,0>a&&(a=this.imageLi.length-1)):(a++,a>=this.imageLi.length&&(a=0)),this.currentPicIndex=a,this.selectedDot(this.currentPicIndex),void this.doAnimate(this.imageLi,this.currentPicIndex,c,b))},this.selectedDot=function(a){for(var b=this.param.bind.querySelectorAll(".dot li"),c=0;c<b.length;c++)c===a?b[c].className="selected":b[c].className=""},this.doAnimate=function(a,b,c,d){for(var e=510,f=0;f<a.length;f++)f!==c&&(a[f].style.top="-9999px",a[f].style.left=1===d?"-100%":"100%",a[f].style.top="0",a[f].className="active");a[c].className="active",a[c].style.left=1===d?"100%":"-100%",setTimeout(function(){a[c].className="",a[c].style.top="-9999px",a[c].style.left=1===d?"-100%":"100%",a[c].style.top="0"},e),a[b].style.left=0},this.clearSlide=function(){this.param.autoSlide&&clearInterval(this.param.timer)},this.activeSlide=function(){this.param.autoSlide&&this.startAutoSlide()},this.attachEvent=function(){this.param.bind.addEventListener("touchstart",function(a){this.handleTouchStart(a)}.bind(this)),this.param.bind.addEventListener("touchmove",function(a){this.handleTouchMove(a)}.bind(this)),this.param.bind.addEventListener("touchend",function(a){this.handleTouchEnd(a)}.bind(this)),window.addEventListener("resize",function(){this.resizePanel()}.bind(this)),window.addEventListener("blur",function(){this.clearSlide()}.bind(this)),window.addEventListener("unload",function(){this.clearSlide()}.bind(this)),window.addEventListener("focus",function(){this.activeSlide()}.bind(this))}};