"use strict";var mockPatientDetail={data:[{patientId:10,phone:"11111112222",name:"刘德华",age:30,note:"患者备注-李四",gender:"男",maritalStatus:"未婚",weight:68,height:186,city:"广东湛江坡头区",smokeHistory:"日吸烟量：平均2支;开始吸烟年龄：18;吸烟状态：吸烟",pastDisease:"过往1,过往6,测试其他",hereditaryDisease:"遗传3,遗传4,测试其他",familyHistory:"父亲：家族2,家族21,家族22,其他病史1;母亲：家族5,家族22,其他病史2;兄弟姐妹：家族11,家族22,其他病史3;子女：家族22,其他病史4;",drinkHstory:"饮酒频率：偶尔;日饮酒量：123两;已戒酒，戒酒年龄2岁;饮酒种类：啤酒,红酒,洋酒,其他酒",medicationAllergy:"过敏7,过敏8,其他过敏",headUrl:"http://file-www.sioe.cn/201109/14/222211817.jpg"}],msg:"success",code:0},patientBaseInfo={server:SYS_VAR.SERVER_ADDRESS,messageBox:null,ajax:null,slideTab:null,requestUrl:SYS_VAR.SERVER_ADDRESS,init:function(){var a=window.location.search,b=a.getValueFromUrl();this.messageBox=new MessageBox,this.ajax=new Ajax,this.patientId=b.patient_id,this.getPatientBaseInfo(),this.attachEvent()},getPatientBaseInfo:function(){var a=this,b={url:SYS_VAR.SERVER_ADDRESS+"doc/medication_group_detail/",type:"GET",asyn:!0,onSuccess:a.handleGetInfoSuccess.bind(a),onError:a.handleError.bind(a),sendParameters:{patientId:a.patientId}};this.ajax.send(b),this.handleGetInfoSuccess(mockPatientDetail)},handleGetInfoSuccess:function(a){var b=[],c=document.querySelector("#base-info");if(0===a.code){var d=a.data[0];d&&""!==d&&(b.push("<dl><dt>婚姻情况</dt><dd>"+d.maritalStatus+"</dd></dl>"),b.push("<dl><dt>身高</dt><dd>"+d.height+"</dd></dl>"),b.push("<dl><dt>体重</dt><dd>"+d.weight+"</dd></dl>"),b.push("<dl><dt>药物过敏史</dt><dd>"+d.medicationAllergy+"</dd></dl>"),b.push("<dl><dt>既往病史</dt><dd>"+d.pastDisease+"</dd></dl>"),b.push("<dl><dt>家庭病史</dt><dd>"+d.familyHistory+"</dd></dl>"),b.push("<dl><dt>遗传病史</dt><dd>"+d.hereditaryDisease+"</dd></dl>"),b.push("<dl><dt>吸烟状况</dt><dd>"+d.smokeHistory+"</dd></dl>"),b.push("<dl><dt>饮酒状况</dt><dd>"+d.drinkHstory+"</dd></dl>"))}c.innerHTML=b.join("")},handleError:function(a){this.messageBox.show({msg:a.msg||"获取失败，请刷新本页！",type:"alert",autoClose:!0})},attachEvent:function(){var a=document.querySelector("#send-messages");a.addEventListener("click",this.handleClick.bind(this))},handleClick:function(){console.log("click send button!")}};patientBaseInfo.init();