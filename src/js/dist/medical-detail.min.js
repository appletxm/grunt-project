var mock_result={data:[{skuId:13888,name:"【999】三九感冒灵胶囊 12粒",commonName:"三九感冒灵胶囊",images:["../../styles/images/ad_0.png","../../styles/images/ad_1.png","../../styles/images/ad_2.png"],manufacturer:"天津金耀",character:"",approvalNum:"国药准字H12021197",spec:"",packaging:"",indications:"",usage:"",adverseReactions:"",taboo:"",attention:"国药准字H12021197国药准 字H12021197国药准字H12021197国药准字H12021197国药 准字H12021197国药准字H12021197国药准字H12021197国药准字H12021197国药准 字H12021197国药准字H12021197国药准字H12021197国药 准字H12021197国药准字H12021197",drugInteractions:"",toxicology:"",storage:"",effective:"24个月",prescribed:!0}],msg:"success",code:0},mock_return={data:[],msg:"success",code:0},medicalDetail={ajax:null,messageBox:null,slideImage:null,requestUrl:SYS_VAR.SERVER_ADDRESS,medicalId:getQueryString("medicalId"),isAdded:getQueryString("isAdded"),slideImageConfig:{bind:document.querySelector("#medicalImageSlide"),images:[],autoSlide:!0,autoTime:3e3,position:0},init:function(){this.ajax=new Ajax,this.messageBox=new MessageBox,this.slideImage=new SlideImage,this.getMedicalDetail(),this.attachEvent()},getMedicalDetail:function(){var a={sendParameters:{doctorId:"",pid:this.medicalId}};a.url=this.requestUrl+"doc/medication_detail/",a.type="GET",a.asyn=!0,a.onSuccess=this.handleGetMedicalDetailSuccess.bind(this),a.onError=this.handleGetError.bind(this),a.mssage=this.msessageBox,this.ajax.send(a)},handleGetMedicalDetailSuccess:function(a){if(0===a.code){if(a.data&&a.data.length>0){var b=a.data[0];document.querySelector("#prescribed").innerText=b.prescribed?"是":"否",document.querySelector("#commonName").innerText=b.commonName,document.querySelector("#manufacturer").innerText=b.manufacturer,document.querySelector("#character").innerText=b.character,document.querySelector("#spec").innerText=b.spec,document.querySelector("#packaging").innerText=b.packaging,document.querySelector("#indications").innerText=b.indications,document.querySelector("#usage").innerText=b.usage,document.querySelector("#adverseReactions").innerText=b.adverseReactions,document.querySelector("#taboo").innerText=b.taboo,document.querySelector("#attention").innerText=b.attention,document.querySelector("#drugInteractions").innerText=b.drugInteractions,document.querySelector("#toxicology").innerText=b.toxicology,document.querySelector("#storage").innerText=b.storage,document.querySelector("#effective").innerText=b.effective,document.querySelector("#approvalNum").innerText=b.approvalNum,b.images&&b.images.length>=0&&(this.slideImageConfig.images=b.images,this.slideImage.init(this.slideImageConfig))}}else this.handleGetError(a)},handleGetError:function(a){this.messageBox.show({msg:a.msg,type:"alert",autoClose:!0})},handleFooter:function(a){var b=a.target;"0"==b.getAttribute("data-action")?(this.uri="doc/medication_add_box/",this.handleStore(a)):"1"==b.getAttribute("data-action")&&(this.uri="medication_remove_box/",this.handleStore(a))},handleStore:function(a){var b={sendParameters:{pid:this.medicalId,doctor_id:""}};b.url=this.requestUrl+this.uri,b.type="GET",b.asyn=!0,b.onSuccess=this.handleStoreSuccess.bind(this),b.onError=this.handleGetError.bind(this),b.mssage=this.msessageBox,this.ajax.send(b)},handleStoreSuccess:function(a){0===a.code?(this.messageBox.show({msg:"处理成功",type:"alert",autoClose:!0}),this.isAdded="true"==this.isAdded?"false":"true",this.changeFooter()):this.handleGetError(a)},changeFooter:function(){var a="";a="true"==this.isAdded?'<a data-action="1">取消常用药</a>':'<a data-action="0">添加到常用药</a>',document.querySelector("footer").innerHTML=a},attachEvent:function(){var a=document.querySelector("footer");a.addEventListener("click",function(a){this.handleFooter(a)}.bind(this))}};medicalDetail.init();